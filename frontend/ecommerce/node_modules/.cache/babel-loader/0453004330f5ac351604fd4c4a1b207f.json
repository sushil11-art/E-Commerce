{"ast":null,"code":"import axios from \"../axios/axios\";\nimport { PLACE_ORDER, CANCEL_ORDER, GET_ORDERS } from \"./types\";\nimport { setAlert } from \"./alert\";\nexport const placeOrder = formData => async dispatch => {\n  try {\n    const token = localStorage.getItem(\"token\"); // const body = {};\n\n    const res = await axios.post('/order/placeOrder', formData, {\n      headers: {\n        \"x-auth-token\": token\n      }\n    });\n    console.log(res.data); // console.log(res.data.newCartItems.subTotal);\n\n    dispatch({\n      type: PLACE_ORDER,\n      payload: res.data\n    });\n    dispatch(setAlert(\"You have successfully order the items\", \"success\")); // history.push(\"/cart\");\n    // console.log(res.data);\n  } catch (err) {\n    // console.log(err);\n    const errors = err.response.data.errors; // console.log(err);\n\n    if (errors) {\n      errors.forEach(error => dispatch(setAlert(error.msg, \"danger\")));\n    }\n\n    dispatch({\n      type: REGISTER_FAIL\n    });\n  }\n};\nexport const getMyOrders = () => async dispatch => {\n  try {\n    const token = localStorage.getItem(\"token\"); // const body={}\n\n    const res = await axios.get(\"/order/getMyOrders\", {\n      headers: {\n        \"x-auth-token\": token\n      }\n    }); // console.log(res.data);\n\n    dispatch({\n      type: GET_ORDERS,\n      payload: res.data\n    });\n  } catch (err) {\n    console.log(err);\n  }\n};","map":{"version":3,"sources":["/home/sushil/2021/E-Commerce/frontend/ecommerce/src/actions/order.js"],"names":["axios","PLACE_ORDER","CANCEL_ORDER","GET_ORDERS","setAlert","placeOrder","formData","dispatch","token","localStorage","getItem","res","post","headers","console","log","data","type","payload","err","errors","response","forEach","error","msg","REGISTER_FAIL","getMyOrders","get"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,gBAAlB;AACA,SAAQC,WAAR,EAAoBC,YAApB,EAAiCC,UAAjC,QAAkD,SAAlD;AACA,SAASC,QAAT,QAAyB,SAAzB;AAIA,OAAO,MAAMC,UAAU,GAAIC,QAAD,IAAc,MAAOC,QAAP,IAAoB;AAC1D,MAAI;AACF,UAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CADE,CAEF;;AACA,UAAMC,GAAG,GAAG,MAAMX,KAAK,CAACY,IAAN,CAAW,mBAAX,EAAgCN,QAAhC,EAA0C;AAC1DO,MAAAA,OAAO,EAAE;AAAE,wBAAgBL;AAAlB;AADiD,KAA1C,CAAlB;AAGAM,IAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACK,IAAhB,EANE,CAOF;;AACAT,IAAAA,QAAQ,CAAC;AAAEU,MAAAA,IAAI,EAAEhB,WAAR;AAAqBiB,MAAAA,OAAO,EAAEP,GAAG,CAACK;AAAlC,KAAD,CAAR;AACAT,IAAAA,QAAQ,CAACH,QAAQ,CAAC,uCAAD,EAA0C,SAA1C,CAAT,CAAR,CATE,CAUF;AACA;AACD,GAZD,CAYE,OAAOe,GAAP,EAAY;AACZ;AACC,UAAMC,MAAM,GAAGD,GAAG,CAACE,QAAJ,CAAaL,IAAb,CAAkBI,MAAjC,CAFW,CAGZ;;AACA,QAAIA,MAAJ,EAAY;AACVA,MAAAA,MAAM,CAACE,OAAP,CAAgBC,KAAD,IAAWhB,QAAQ,CAACH,QAAQ,CAACmB,KAAK,CAACC,GAAP,EAAY,QAAZ,CAAT,CAAlC;AACD;;AACDjB,IAAAA,QAAQ,CAAC;AAAEU,MAAAA,IAAI,EAAEQ;AAAR,KAAD,CAAR;AACD;AACA,CAtBI;AAyBP,OAAO,MAAMC,WAAW,GAAC,MAAI,MAAMnB,QAAN,IAAiB;AAC5C,MAAG;AACA,UAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CADA,CAED;;AACA,UAAMC,GAAG,GAAG,MAAMX,KAAK,CAAC2B,GAAN,CAAU,oBAAV,EAAgC;AAChDd,MAAAA,OAAO,EAAE;AAAE,wBAAgBL;AAAlB;AADuC,KAAhC,CAAlB,CAHC,CAMD;;AACAD,IAAAA,QAAQ,CAAC;AAAEU,MAAAA,IAAI,EAAEd,UAAR;AAAoBe,MAAAA,OAAO,EAAEP,GAAG,CAACK;AAAjC,KAAD,CAAR;AAED,GATD,CAUA,OAAMG,GAAN,EAAU;AACRL,IAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACD;AACF,CAdM","sourcesContent":["import axios from \"../axios/axios\";\nimport {PLACE_ORDER,CANCEL_ORDER,GET_ORDERS} from \"./types\";\nimport { setAlert } from \"./alert\";\n\n\n\nexport const placeOrder = (formData) => async (dispatch) => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    // const body = {};\n    const res = await axios.post('/order/placeOrder', formData, {\n      headers: { \"x-auth-token\": token },\n    });\n    console.log(res.data);\n    // console.log(res.data.newCartItems.subTotal);\n    dispatch({ type: PLACE_ORDER, payload: res.data });\n    dispatch(setAlert(\"You have successfully order the items\", \"success\"));\n    // history.push(\"/cart\");\n    // console.log(res.data);\n  } catch (err) {\n    // console.log(err);\n     const errors = err.response.data.errors;\n    // console.log(err);\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, \"danger\")));\n    }\n    dispatch({ type: REGISTER_FAIL });\n  }\n  }\n\n   \nexport const getMyOrders=()=>async(dispatch)=>{\n  try{\n     const token = localStorage.getItem(\"token\");\n    // const body={}\n    const res = await axios.get(\"/order/getMyOrders\", {\n      headers: { \"x-auth-token\": token },\n    });\n    // console.log(res.data);\n    dispatch({ type: GET_ORDERS, payload: res.data });\n\n  }\n  catch(err){\n    console.log(err);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}