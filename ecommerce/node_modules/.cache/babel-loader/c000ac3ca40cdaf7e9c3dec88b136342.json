{"ast":null,"code":"import axios from \"../axios/axios\";\nimport { PLACE_ORDER, PLACE_ORDER_FAIL, CANCEL_ORDER, GET_ORDERS, GET_ORDER, PLACE_ORDER_BY_ID } from \"./types\";\nimport { setAlert } from \"./alert\";\nexport const placeOrder = formData => async dispatch => {\n  try {\n    const token = localStorage.getItem(\"token\"); // const body = {};\n\n    const res = await axios.post('/order/placeOrder', formData, {\n      headers: {\n        \"x-auth-token\": token\n      }\n    });\n    console.log(res.data); // console.log(res.data.newCartItems.subTotal);\n\n    dispatch({\n      type: PLACE_ORDER,\n      payload: res.data\n    });\n    dispatch(setAlert(\"You have successfully order the items\", \"success\")); // history.push(\"/cart\");\n    // console.log(res.data);\n  } catch (err) {\n    // console.log(err);\n    const errors = err.response.data.errors; // console.log(err);\n\n    if (errors) {\n      errors.forEach(error => dispatch(setAlert(error.msg, \"danger\")));\n    }\n\n    dispatch({\n      type: PLACE_ORDER_FAIL\n    });\n  }\n};\nexport const cancelOrder = (orderID, history) => async dispatch => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    const body = {};\n    const res = await axios.post(`/order/cancel-order/${orderID}`, body, {\n      headers: {\n        \"x-auth-token\": token\n      }\n    }); // console.log(res.data);\n    // console.log(res.data.newCartItems.subTotal);\n\n    dispatch({\n      type: CANCEL_ORDER,\n      payload: res.data\n    });\n    dispatch(setAlert(\"You have cancelled the order\", \"success\")); // history.push(\"/order\");\n  } catch (err) {}\n};\nexport const placeOrderByID = (orderID, history) => async dispatch => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    const body = {};\n    const res = await axios.post(`/order/place-order/${orderID}`, body, {\n      headers: {\n        \"x-auth-token\": token\n      }\n    });\n    dispatch({\n      type: PLACE_ORDER_BY_ID,\n      payload: res.data\n    });\n    dispatch(setAlert(\"You have placed order successfully\", \"success\")); // history.push(\"/order\");\n  } catch (err) {}\n};\nexport const getMyOrders = () => async dispatch => {\n  try {\n    const token = localStorage.getItem(\"token\"); // const body={}\n\n    const res = await axios.get(\"/order/getMyOrders\", {\n      headers: {\n        \"x-auth-token\": token\n      }\n    }); // console.log(res.data);\n\n    dispatch({\n      type: GET_ORDERS,\n      payload: res.data\n    });\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const orderDetails = orderID => async dispatch => {\n  try {\n    const token = localStorage.getItem(\"token\"); // const body={}\n\n    const res = await axios.get(`/order/order-details/${orderID}`, {\n      headers: {\n        \"x-auth-token\": token\n      }\n    }); // console.log(res.data);\n\n    dispatch({\n      type: GET_ORDER,\n      payload: res.data\n    });\n  } catch (err) {\n    console.log(err);\n  }\n};","map":{"version":3,"sources":["/home/sushil/2021/E-Commerce/ecommerce/src/actions/order.js"],"names":["axios","PLACE_ORDER","PLACE_ORDER_FAIL","CANCEL_ORDER","GET_ORDERS","GET_ORDER","PLACE_ORDER_BY_ID","setAlert","placeOrder","formData","dispatch","token","localStorage","getItem","res","post","headers","console","log","data","type","payload","err","errors","response","forEach","error","msg","cancelOrder","orderID","history","body","placeOrderByID","getMyOrders","get","orderDetails"],"mappings":"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","sourcesContent":["import axios from \"../axios/axios\";\nimport {PLACE_ORDER,PLACE_ORDER_FAIL,CANCEL_ORDER,GET_ORDERS,GET_ORDER,PLACE_ORDER_BY_ID} from \"./types\";\nimport { setAlert } from \"./alert\";\n\nexport const placeOrder = (formData) => async (dispatch) => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    // const body = {};\n    const res = await axios.post('/order/placeOrder', formData, {\n      headers: { \"x-auth-token\": token },\n    });\n    console.log(res.data);\n    // console.log(res.data.newCartItems.subTotal);\n    dispatch({ type: PLACE_ORDER, payload: res.data });\n    dispatch(setAlert(\"You have successfully order the items\", \"success\"));\n    // history.push(\"/cart\");\n    // console.log(res.data);\n  } catch (err) {\n    // console.log(err);\n     const errors = err.response.data.errors;\n    // console.log(err);\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, \"danger\")));\n    }\n    dispatch({ type: PLACE_ORDER_FAIL });\n  }\n  }\n\nexport const cancelOrder=(orderID,history)=>async(dispatch)=>{\n  try{\n const token = localStorage.getItem(\"token\");\n\n    const body = {};\n    const res = await axios.post(`/order/cancel-order/${orderID}`, body, {\n      headers: { \"x-auth-token\": token },\n    });\n    // console.log(res.data);\n    // console.log(res.data.newCartItems.subTotal);\n    dispatch({ type: CANCEL_ORDER, payload: res.data });\n    dispatch(setAlert(\"You have cancelled the order\", \"success\"));\n    // history.push(\"/order\");\n\n  }\n  catch(err){\n\n  }\n}\n\nexport const placeOrderByID=(orderID,history)=>async(dispatch)=>{\n  try{\n const token = localStorage.getItem(\"token\");\n\n    const body = {};\n    const res = await axios.post(`/order/place-order/${orderID}`, body, {\n      headers: { \"x-auth-token\": token },\n    });\n    dispatch({ type: PLACE_ORDER_BY_ID, payload: res.data });\n      dispatch(setAlert(\"You have placed order successfully\", \"success\"));\n    // history.push(\"/order\");\n\n  }\n  catch(err){\n\n  }\n}\n\n\n   \nexport const getMyOrders=()=>async(dispatch)=>{\n  try{\n     const token = localStorage.getItem(\"token\");\n    // const body={}\n    const res = await axios.get(\"/order/getMyOrders\", {\n      headers: { \"x-auth-token\": token },\n    });\n    // console.log(res.data);\n    dispatch({ type: GET_ORDERS, payload: res.data });\n\n  }\n  catch(err){\n    console.log(err);\n  }\n}\n\n\nexport const orderDetails=(orderID)=>async(dispatch)=>{\n  try{\n     const token = localStorage.getItem(\"token\");\n    // const body={}\n    const res = await axios.get(`/order/order-details/${orderID}`, {\n      headers: { \"x-auth-token\": token },\n    });\n    // console.log(res.data);\n    dispatch({ type: GET_ORDER, payload: res.data });\n\n  }\n  catch(err){\n    console.log(err);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}